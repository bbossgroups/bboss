<?xml version="1.0" encoding='UTF-8'?>
<properties>
	<description>
<![CDATA[
	sql配置文件
	可以通过名称属性name配置默认sql，特定数据库的sql通过在
	名称后面加数据库类型后缀来区分，例如：
	sqltest
	sqltest-oracle
	sqltest-derby
	sqltest-mysql
	等等，本配置实例就演示了具体配置方法
 ]]>
	</description>
	
	
	<property name="queryFieldWithSQLParams"><![CDATA[select aa.yjjsdw yjjsdw , mc dwmc ,yjTotal , shiJiTaoFanNum , jiShiBiDui , chaoShiBiDui ,jiShiBiDuiYv          , jiShiQs , ChaoShiQs , WeiQianShou ,qianShouYv,jiShiQianShouYv,jiShiFk , ChaoShiFk , WeiFanKui          , fanKuiYv , jiShiFanKuiYv ,zhuoHuaNum , preZhuaHuoNum ,yvJingZhuahuoNum , (yjTotal-zhuoHuaNum) weiZhuaHuo          , round(yvJingZhuahuoNum/yjTotal , 4)*100 yvJingZhuahuoYv          --分数          ,round(jiShiQianShouYv*0.2+jiShiFanKuiYv*0.1+round(yvJingZhuahuoNum/yjTotal , 4)*100*0.7, 2) fengShu            --排名          ,RANK() OVER (              ORDER BY (round(jiShiQianShouYv*0.2+jiShiFanKuiYv*0.1+round(yvJingZhuahuoNum/yjTotal , 4)*100*0.7, 2)) desc           )paiMing           from(       select yjjsdw , b.city_name mc ,yjTotal               , shiJiTaoFanNum , jiShiBiDui , chaoShiBiDui , round(jishiBidui/yjTotal,4)*100 jiShiBiDuiYv              , jiShiQs , ChaoShiQs , WeiQianShou              ,Round((jiShiQs+ChaoShiQs)/yjTotal,4)*100 qianShouYv ,round(jiShiQs/yjTotal,4)*100 jiShiQianShouYv              ,JiShiFk , ChaoShiFk , WeiFanKui , round((JiShiFk+ChaoShiFk)/yjTotal , 4)*100 fanKuiYv              ,round(jiShiFk/yjTotal , 4)*100 jiShiFanKuiYv       from(         select substr(yjjsdw , 1, 4) yjjsdw , count(*) yjTotal                 --比中情况                ,count(distinct zdrybh) shiJiTaoFanNum                 ,SUM(                   case                       when qbzhpt.isdate(xxbdsj,'YYYYMMDDHH24MISS')=1 and qbzhpt.isdate(hdfssj,'YYYYMMDDHH24MISS')=1 then                          DECODE(SIGN((to_date(xxbdsj,'YYYYMMDDHH24MISS')-to_date(hdfssj,'YYYYMMDDHH24MISS'))*24*60-30),-1 , 1 , 0 , 1 ,0)                      else 0                    end                 ) jiShiBiDui                , SUM(                    case                       when qbzhpt.isdate(xxbdsj,'YYYYMMDDHH24MISS')=1 and qbzhpt.isdate(hdfssj,'YYYYMMDDHH24MISS')=1 then                          decode(SIGN((to_date(xxbdsj,'YYYYMMDDHH24MISS')-to_date(hdfssj,'YYYYMMDDHH24MISS'))*24*60-30),1,1,null,1,0)                      else 1                    end                  ) chaoShiBiDui                 --签收情况                 ,sum(decode(SFJSQS , '1' , 1)) JiShiQs ,sum(decode(SFJSQS , '0' , 1)) ChaoShiQs ,sum(decode(SFJSQS,'2',1)) WeiQianShou                --反馈情况                ,sum(decode(SFJSFK ,'1',1,0)) JiShiFk , sum(decode(SFJSFK ,'0',1)) ChaoShiFk , sum(decode(SFJSFK ,'2',1)) WeiFanKui         from qbzhpt.V_JZ_ZDRYCKYJ_CZYJ         where 1=1             #if($startDate && !$startDate.equals("") && $endDate && !$endDate.equals(""))               and  rxtsj >=#[rxtsjStartDate] || '000000' and rxtsj <= #[rxtsjEndDate] || '235959'            #end         group by substr(yjjsdw,1,4)       ) a , qbzhpt.td_sm_city b         where a.yjjsdw = b.city_id       union all       --长沙公安局的统计情况        select '4301' yjjsdw ,'长沙市公安局' dwmc , yjTotal , shiJiTaoFanNum , jiShiBiDui , chaoShiBiDui               ,round(jiShiBiDui/yjTotal,4) jiShiBiDuiYv , jiShiQs , ChaoShiQs , (yjTotal-qsNum)WeiQianShou               ,Round((jiShiQs+ChaoShiQs)/yjTotal,4)*100 qianShouYv , round(jiShiQs/yjTotal,4)*100 jiShiQianShouYv               ,JiShiFk , ChaoShiFk , (yjTotal-fkNum)WeiFanKui , round((JiShiFk+ChaoShiFk)/yjTotal , 4)*100 fanKuiYv               ,round(jiShiFk/yjTotal , 4)*100 jiShiFanKuiYv        from           ( --长沙比中情况            select '4301' yjjsdw ,count(yjxxbh) yjTotal                                ,count(distinct zdrybh) shiJiTaoFanNum                     ,SUM(                       case                           when qbzhpt.isdate(xxbdsj,'YYYYMMDDHH24MISS')=1 and qbzhpt.isdate(hdfssj,'YYYYMMDDHH24MISS')=1 then                              DECODE(SIGN((to_date(xxbdsj,'YYYYMMDDHH24MISS')-to_date(hdfssj,'YYYYMMDDHH24MISS'))*24*60-30),-1 , 1 , 0 , 1 ,0)                          else 0                        end                     ) jiShiBiDui                    , SUM(                        case                           when qbzhpt.isdate(xxbdsj,'YYYYMMDDHH24MISS')=1 and qbzhpt.isdate(hdfssj,'YYYYMMDDHH24MISS')=1 then                              decode(SIGN((to_date(xxbdsj,'YYYYMMDDHH24MISS')-to_date(hdfssj,'YYYYMMDDHH24MISS'))*24*60-30),1,1,null,1,0)                          else 1                        end                      ) chaoShiBiDui                     from dtjf.v_4301_zdryckyj_czyj            where 1=1               #if($startDate && !$startDate.equals("") && $endDate && !$endDate.equals(""))              	and yjfbsj >=TO_DATE (#[yjfbsjStartDate]|| '00:00:00','MM/DD/YYYY HH24:MI:SS') and yjfbsj<=TO_DATE (#[yjfbsjEndDate] || '23:59:59','MM/DD/YYYY HH24:MI:SS')              #end            --group by yjxxbh           ) c ,          ( --长沙签收情况           select '4301' yjjsdw,sum(case when qssj<=qssx then 1 else 0 end) jishiQs,sum(case when qssj>qssx then 1 else 0 end) ChaoShiQs                   ,count(yjxxbh) qsNum           from dtjf.V_4301_ZDRYCKQS_FRQS           where 1=1               #if($startDate && !$startDate.equals("") && $endDate && !$endDate.equals(""))              	and yjfbsj >=TO_DATE (#[yjfbsjStartDate]|| '00:00:00','MM/DD/YYYY HH24:MI:SS') and yjfbsj<=TO_DATE (#[yjfbsjEndDate] || '23:59:59','MM/DD/YYYY HH24:MI:SS')              #end           --group by yjxxbh          ) d ,           --长沙反馈情况           ( select '4301' yjjsdw , sum(case when fksj<=scczfksx then 1 else 0 end) jishiFk ,sum(case when fksj>scczfksx  then 1 else 0 end) chaoshiFk                  ,count(yjxxbh) fkNum            from dtjf.V_4301_ZDRYCKQS_FRFK           where 1=1              #if($startDate && !$startDate.equals("") && $endDate && !$endDate.equals(""))              	and yjfbsj >=TO_DATE (#[yjfbsjStartDate]|| '00:00:00','MM/DD/YYYY HH24:MI:SS') and yjfbsj<=TO_DATE (#[yjfbsjEndDate] || '23:59:59','MM/DD/YYYY HH24:MI:SS')              #end           --group by yjxxbh           ) e       where  c.yjjsdw = d.yjjsdw and c.yjjsdw = e.yjjsdw     ) aa ,       --抓获情况统计      (select substr(yjjsdw,1,4) yjjsdw ,count(distinct sfzh) zhuoHuaNum               ,SUM(                          case                                when exists(select * from  qbzhpt.t_ZL_ZDRYCKFK fk where zh.yjxxbh = fk.yjxxbh and fk.sjczjg in (120)) then 1                               else 0                           end                )preZhuaHuoNum              ,SUM(                          case                                when exists(select * from  qbzhpt.t_ZL_ZDRYCKFK fk where zh.yjxxbh = fk.yjxxbh and fk.sjczjg in (130)) then 1                               else 0                           end                )yvJingZhuahuoNum       from dtjf.V_BBTJ_ZDRYCKYJ_CZZH zh --join  qbzhpt.t_ZL_ZDRYCKFK fk on zh.yjxxbh = fk.yjxxbh       where 1=1             #if($startDate && !$startDate.equals("") && $endDate && !$endDate.equals(""))               and  rxtsj >=#[rxtsjStartDate] || '000000' and rxtsj <= #[rxtsjEndDate] || '235959'            #end       group by substr(yjjsdw,1,4)      ) bb   where aa.yjjsdw = bb.yjjsdw ]]>
	</property>
</properties>
